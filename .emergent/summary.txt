<analysis>
The previous AI engineer meticulously developed a full-stack allergy assistance application, ClarifyAI, using React, FastAPI, and MongoDB. The development progressed through several iterative phases, starting from initial setup and core feature implementation (text analysis, Google OAuth) to sophisticated AI-powered functionalities like product label and restaurant menu scanning. Key technical decisions included leveraging Emergentintegrations for LLM services, dynamically managing API keys (Emergent Universal Key, then user-provided Google API key), and adopting Shadcn UI for a modern frontend. The AI agent consistently addressed user feedback, refining UI/UX, integrating new features like a personalized safety rating and safe alternatives, and enhancing mobile responsiveness. Debugging involved careful log analysis and rectifying issues like LLM budget limits and file corruptions. The trajectory showcases a systematic approach to feature development, bug fixing, and continuous improvement based on explicit user requests, culminating in a robust and adaptive application.
</analysis>

<product_requirements>
The user requested a website, initially named SafeEats AI, to help individuals with allergies identify safe/unsafe food/products, and what they can apply on their skin, powered by AI. Key features explicitly requested and implemented include:

1.  **AI Analysis**: Core functionality to analyze inputs and provide safety ratings and warnings based on user's allergy profile.
2.  **User Authentication**: Integration with Google login.
3.  **Website Branding**: Renamed from SafeEats AI to ClarifyAI with a custom logo.
4.  **Product Scanner**: Allows users to upload photos of product labels (food, skincare, fragrance) for AI to read ingredients, highlight allergens, and provide a Safe/Unsafe rating and a 1-100 personalized safety score.
5.  **Restaurant Menu Analyzer**: Enables users to paste restaurant menu URLs or upload menu photos for AI to cross-reference with user profiles, highlight safe dishes, and suggest modifications.
6.  **Mobile Responsiveness**: Camera capture functionality for mobile devices for photo uploads, and a clean, organized interface on phones.
7.  **Safety Alternatives**: When a product is harmful, the AI should provide 3-5 safe alternatives.
8.  **Theming**: Dynamic theming with light mode (white/purple) and dark mode (black/purple) based on user device settings.
9.  **User Profile Enhancement**: Addition of Religion Restrictions field in the user's dietary profile.
</product_requirements>

<key_technical_concepts>
-   **FastAPI**: Backend framework for building REST APIs.
-   **React.js**: Frontend library for building user interfaces.
-   **MongoDB**: NoSQL database for data storage.
-   **AI Vision/LLM Integration**: Utilizing Google Gemini models (initially 2.5 Pro, then Flash) for image (OCR, ingredient extraction) and text analysis.
-   **Emergentintegrations Library**: Custom library for seamless LLM integration with Universal Key.
-   **Google OAuth**: Authentication mechanism.
-   **Shadcn UI & Tailwind CSS**: Frontend component library and utility-first CSS framework for styling.
-   **Pydantic**: Data validation and serialization for FastAPI models.
</key_technical_concepts>

<code_architecture>
The application follows a standard full-stack architecture:



**Detailed Directory Structure & File Summaries:**

-   **/app/backend/**
    -   : Main FastAPI application.
        -   **Summary**: Defines all backend API endpoints, including user authentication, profile management, text analysis, image analysis (product labels), and menu analysis (URL/photo). Handles LLM calls and database interactions.
        -   **Changes**: Initially configured with basic routes and models. Evolved significantly to add , , ,  fields to Pydantic models. Implemented image/menu analysis endpoints, fixed  parameter for LLM calls, enhanced error handling for LLM budget, updated AI prompts for product types (perfume/cologne), and added  to . Also includes CORS setup and a health check endpoint.
    -   : Stores environment variables like  and .
        -   **Summary**: Contains sensitive configuration details.
        -   **Changes**:  was added here to switch from Emergent Universal Key to user's personal Google API key.
    -   : Python dependencies.
        -   **Summary**: Lists all required Python packages for the backend.
        -   **Changes**: Updated during initial setup and potentially for new libraries like .
-   **/app/frontend/**
    -   : Main React component and entry point for routing.
        -   **Summary**: Manages overall application routing using  and integrates the .
        -   **Changes**: Initially a simple app component, evolved to include routing for , , , . Was recreated after accidental deletion and updated to use  and . Logo image paths and  name updates were also applied here.
    -   : Main HTML file.
        -   **Summary**: The base HTML structure for the React app.
        -   **Changes**: Added  meta tag for better light/dark mode handling.
    -   : Global application styles.
        -   **Summary**: Contains global and shared CSS rules.
        -   **Changes**: Modified extensively for UI simplification, new blue/teal theme, purple/black theme, and light/dark mode specific styles using . Also updated various color values from green to purple.
    -   : The public landing page.
        -   **Summary**: Displays the initial welcome screen, tagline, and Google Sign-in button.
        -   **Changes**: Updated website name to ClarifyAI, added custom logo, implemented tagline (Personalized allergy insights, backed by real science.), and applied various theme/button styling changes (green -> blue -> purple/black, light/dark mode).
    -    (now superseded by  and other pages): Original dashboard.
        -   **Summary**: Initially contained all user-specific features (profile, text analysis, image/menu analysis).
        -   **Changes**: Extensively refactored into , , , and  for better organization.
    -   : Simplified dashboard for profile and text analysis.
        -   **Summary**: Replaces the original , focusing only on user profile management and text-based ingredient analysis.
        -   **Changes**: Created as part of the refactoring, includes UI for profile details, text input for analysis, and displays analysis results including alternatives. Updated to show personalized rating.
    -   : Dedicated page for product label scanning.
        -   **Summary**: Handles image uploads for product labels and displays AI analysis, safety ratings, and alternatives.
        -   **Changes**: Created during refactoring. Implemented image upload via file input and camera capture for mobile. Displays 1-100 safety rating and 3-5 alternatives. Updated for perfume/cologne.
    -   : Dedicated page for restaurant menu analysis.
        -   **Summary**: Manages URL and photo inputs for menu analysis, showing safe dishes and modifications.
        -   **Changes**: Created during refactoring. Implemented menu URL and photo upload, including camera capture.
    -   : Shared layout component with navigation.
        -   **Summary**: Provides consistent navigation and layout wrapper for authenticated pages.
        -   **Changes**: Created to centralize navigation (Dashboard, Product Scanner, Menu Analyzer) and provide a consistent UI structure. Applied theme changes here.
    -   : Node.js dependencies and scripts.
        -   **Summary**: Manages frontend dependencies and build scripts.
        -   **Changes**: Updates for new libraries (e.g., , ) as needed.
    -   : Shadcn UI components.
        -   **Summary**: Reusable, pre-built UI components for consistent design and functionality.
        -   **Changes**: Utilized extensively for buttons, inputs, toasts, etc., ensuring modern and accessible UI elements.
</code_architecture>

<pending_tasks>
-   Add a new Recipe Finder feature that searches for allergy-safe recipes, to be integrated as a new tab next to the product scanner.
</pending_tasks>

<current_work>
Currently, the application, ClarifyAI, provides comprehensive allergy assistance. Users can sign in with Google, manage their allergy profiles, and utilize various AI-powered scanning features. The application supports text-based analysis of ingredients, photo uploads for product labels (including food, skincare, and fragrances), and both URL and photo uploads for restaurant menu analysis.

Recent work focused on:
1.  **Backend Enhancements**:
    *   Updated  to include  in the  model.
    *   Modified  and  endpoints to incorporate  in AI prompts.
2.  **Frontend Updates**:
    *   Updated frontend components (presumably  for profile editing) to add the Religion Restrictions input field.
    *   Improved mobile responsiveness across the application for better organization and cleaner experience on phones.
The last action was starting the implementation of a new Recipe Finder feature as requested by the user, which will involve creating a new page/tab and its corresponding backend logic.
</current_work>

<optional_next_step>
I will add a new Recipe Finder feature that searches for allergy-safe recipes, following the user's request.
can you add another tab right next too product scanner that finds recipes online on how to make a specific food item without any worries on allergies.
</optional_next_step>
